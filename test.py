#!/usr/bin/env python

import dis
import sys
import marshal



def disassemble_file(filename, mode):

    if mode == 'd' or mode == 'D':
        with open(filename, 'rb') as f:
         f.seek(16)
         dis.dis(marshal.load(f))  
    else:
        print("Invalid mode. Use either -d or -t.")
   

if __name__ == '__main__':         
    #If all arguments are correct, disassemble the file using the specified mode     
    if len(sys.argv) == 3:
        mode = sys.argv[1].lstrip("--")
        filename = sys.argv[2] 
        disassemble_file(filename, mode)

    else:
        print("Invalid arguments. Usage: python3 disassembler.py [-d|-t] filename")

